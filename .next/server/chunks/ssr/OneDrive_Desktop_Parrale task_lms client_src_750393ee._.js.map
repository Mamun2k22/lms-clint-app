{"version":3,"sources":["turbopack:///[project]/OneDrive/Desktop/Parrale task/lms client/src/lib/apis/http.ts","turbopack:///[project]/OneDrive/Desktop/Parrale task/lms client/src/app/admin/page.tsx"],"sourcesContent":["const BASE = process.env.NEXT_PUBLIC_API_BASE!;\r\n\r\n/** Client-side calls (adds Bearer from localStorage) */\r\nexport async function api<T = unknown>(path: string, init: RequestInit = {}): Promise<T> {\r\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n  const headers = new Headers(init.headers);\r\n  if (!headers.has(\"Content-Type\")) headers.set(\"Content-Type\", \"application/json\");\r\n  if (token) headers.set(\"Authorization\", `Bearer ${token}`);\r\n  const res = await fetch(`${BASE}${path}`, { ...init, headers, cache: \"no-store\" });\r\n  if (!res.ok) throw await res.json().catch(() => ({ message: res.statusText }));\r\n  return (await res.json()) as T;\r\n}\r\n\r\n/** Server-side fetch (no token) for public endpoints */\r\nexport async function serverApi<T = unknown>(path: string, init: RequestInit = {}): Promise<T> {\r\n  const res = await fetch(`${BASE}${path}`, { ...init, cache: \"no-store\" });\r\n  if (!res.ok) throw await res.json().catch(() => ({ message: res.statusText }));\r\n  return (await res.json()) as T;\r\n}\r\n","// src/app/admin/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { serverApi } from \"@/lib/apis/http\";\r\nimport type { Course } from \"@/lib/types\";\r\n\r\nexport default function AdminDashboard() {\r\n  const [courses, setCourses] = useState<Course[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    serverApi<Course[]>(\"/courses\")\r\n      .then((r) => setCourses(r))\r\n      .catch(() => setCourses([]))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  const stats = useMemo(() => {\r\n    const total = courses.length;\r\n    const paid = courses.filter((c) => Number(c.price) > 0).length;\r\n    const free = total - paid;\r\n    const avgPrice = total\r\n      ? courses.reduce((s, c) => s + Number(c.price || 0), 0) / total\r\n      : 0;\r\n    return { total, paid, free, avgPrice };\r\n  }, [courses]);\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Title */}\r\n      <div>\r\n        <h1 className=\"text-3xl font-extrabold tracking-tight\">Dashboard</h1>\r\n        <p className=\"text-sm text-gray-600\">\r\n          Quick overview of your course catalog and recent updates.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Premium Stat Cards */}\r\n      <section className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n        <StatCard label=\"Total Courses\" value={stats.total} color=\"from-sky-500 to-cyan-500\" />\r\n        <StatCard label=\"Paid Courses\" value={stats.paid} color=\"from-emerald-500 to-teal-500\" />\r\n        <StatCard label=\"Free Courses\" value={stats.free} color=\"from-orange-400 to-pink-500\" />\r\n        <StatCard\r\n          label=\"Avg. Price\"\r\n          value={`$${stats.avgPrice.toFixed(2)}`}\r\n          color=\"from-violet-500 to-fuchsia-500\"\r\n        />\r\n      </section>\r\n\r\n      {/* Recent Courses â€“ Premium Card */}\r\n      <section className=\"rounded-3xl border bg-white/80 backdrop-blur shadow-sm ring-1 ring-black/5\">\r\n        {/* Card header */}\r\n        <div className=\"flex items-center justify-between gap-3 border-b px-6 py-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-black text-white shadow-sm\">\r\n              ðŸ“š\r\n            </span>\r\n            <div>\r\n              <h2 className=\"text-xl font-bold leading-tight\">Recent Courses</h2>\r\n              <p className=\"text-xs text-gray-600\">\r\n                Your latest published or updated items\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <a\r\n            href=\"/admin/courses\"\r\n            className=\"inline-flex items-center gap-1 rounded-xl border bg-white px-3 py-1.5 text-sm font-medium shadow-sm transition hover:bg-gray-50\"\r\n          >\r\n            View all <span aria-hidden>â†’</span>\r\n          </a>\r\n        </div>\r\n\r\n        {/* Card body */}\r\n        <div className=\"px-6 py-6 bg-gradient-to-br from-white/60 via-white/70 to-gray-50/70 rounded-b-3xl\">\r\n          {loading ? (\r\n            <ul className=\"grid gap-5 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n              {Array.from({ length: 8 }).map((_, i) => (\r\n                <li\r\n                  key={i}\r\n                  className=\"rounded-2xl border bg-white/70 p-5 shadow-sm ring-1 ring-gray-100\"\r\n                >\r\n                  <div className=\"h-5 w-2/3 animate-pulse rounded bg-gray-200\" />\r\n                  <div className=\"mt-2 h-3 w-1/3 animate-pulse rounded bg-gray-200\" />\r\n                  <div className=\"mt-5 h-9 w-full animate-pulse rounded bg-gray-200\" />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : courses.length === 0 ? (\r\n            <div className=\"rounded-2xl border border-dashed bg-white/70 p-10 text-center shadow-sm ring-1 ring-gray-100\">\r\n              <div className=\"mx-auto mb-3 grid h-12 w-12 place-items-center rounded-full bg-gray-100 text-lg\">ï¼‹</div>\r\n              <p className=\"text-sm text-gray-600\">\r\n                No courses yet. Create one from{\" \"}\r\n                <a className=\"text-blue-600 underline\" href=\"/admin/courses\">Courses</a>.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <ul className=\"grid gap-5 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n              {courses.slice(0, 12).map((c) => (\r\n                <CourseCard key={c._id} course={c} />\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------------- UI Bits ---------------- */\r\n\r\nfunction StatCard({\r\n  label,\r\n  value,\r\n  color = \"from-indigo-500 to-purple-500\",\r\n}: {\r\n  label: string;\r\n  value: React.ReactNode;\r\n  color?: string;\r\n}) {\r\n  return (\r\n    <div className=\"relative overflow-hidden rounded-2xl bg-white shadow-sm ring-1 ring-gray-200\">\r\n      {/* thin gradient bar on top for premium feel */}\r\n      <div className={`h-1 w-full bg-gradient-to-r ${color}`} />\r\n      <div className=\"p-5\">\r\n        <div className=\"text-xs uppercase tracking-wide/relaxed text-gray-600\">\r\n          {label}\r\n        </div>\r\n        <div className=\"mt-2 text-2xl font-bold\">{value}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CourseCard({ course }: { course: Course }) {\r\n  const price = Number(course.price ?? 0);\r\n  const isPaid = price > 0;\r\n\r\n  return (\r\n    <li\r\n      className=\"group relative rounded-2xl border bg-white p-5 shadow-sm ring-1 ring-gray-200 transition hover:-translate-y-0.5 hover:shadow-md\"\r\n    >\r\n      {/* subtle inner highlight */}\r\n      <div className=\"pointer-events-none absolute inset-0 rounded-2xl shadow-[inset_0_1px_theme(colors.gray.100)]\" />\r\n\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div className=\"min-w-0\">\r\n          <h3 className=\"truncate text-base font-semibold tracking-tight\">\r\n            {course.title}\r\n          </h3>\r\n          <p className=\"mt-0.5 text-sm text-gray-500\">/{course.slug}</p>\r\n        </div>\r\n\r\n        <span\r\n          className=\"shrink-0 rounded-full bg-gray-100 px-2.5 py-1 text-xs font-medium text-gray-800 shadow-sm ring-1 ring-gray-200\"\r\n          title={isPaid ? \"Paid\" : \"Free\"}\r\n        >\r\n          ${price.toFixed(2)}\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"mt-4 grid grid-cols-2 gap-2\">\r\n        <a\r\n          href={`/admin/courses/${course._id}/content`}\r\n          className=\"inline-flex items-center justify-center rounded-xl bg-gray-900 px-3 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-black active:scale-[0.98]\"\r\n        >\r\n          Manage\r\n        </a>\r\n        <a\r\n          href={`/courses/${course.slug}`}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n          className=\"inline-flex items-center justify-center rounded-xl border bg-white px-3 py-2 text-sm font-medium text-gray-900 shadow-sm ring-1 ring-gray-200 transition hover:bg-gray-50\"\r\n        >\r\n          Preview\r\n        </a>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}