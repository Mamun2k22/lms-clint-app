module.exports=[87485,a=>{"use strict";a.s(["api",()=>c,"serverApi",()=>d]);let b="http://localhost:4000";async function c(a,d={}){let e=new Headers(d.headers);e.has("Content-Type")||e.set("Content-Type","application/json");let f=await fetch(`${b}${a}`,{...d,headers:e,cache:"no-store"});if(!f.ok)throw await f.json().catch(()=>({message:f.statusText}));return await f.json()}async function d(a,c={}){let e=await fetch(`${b}${a}`,{...c,cache:"no-store"});if(!e.ok)throw await e.json().catch(()=>({message:e.statusText}));return await e.json()}},44033,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(35113),c=a.i(32856),d=a.i(99477),e=a.i(87485);function f(){let a,{courseId:f}=(0,d.useParams)(),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{p(!0);let[a,b]=await Promise.all([(0,e.serverApi)(`/modules?course=${f}`),(0,e.serverApi)(`/lectures?course=${f}`)]);b.sort((a,b)=>a.order-b.order),h(a),j(b);try{let a=await (0,e.serverApi)(`/progress?course=${f}`);l(a.completedLectureIds??[])}catch{l([])}n(b[0]??null),p(!1)})()},[f]);let s=i.length,t=k.length,u=s?Math.round(t/s*100):0,v=(0,c.useMemo)(()=>{let a=new Map;for(let[b,c]of(g.forEach(b=>a.set(b._id,[])),i.forEach(b=>a.get(b.moduleId)?.push(b)),a.entries()))c.sort((a,b)=>a.order-b.order);return a},[g,i]);async function w(){if(!m)return;try{let a=await (0,e.api)("/progress/complete",{method:"POST",body:JSON.stringify({courseId:f,lectureId:m._id})});l(a.completedLectureIds??[])}catch{l(a=>a.includes(m._id)?a:[...a,m._id])}let a=i.findIndex(a=>a._id===m._id),b=i[a+1];b&&n(b)}return o?(0,b.jsx)("div",{className:"p-6",children:"Loadingâ€¦"}):m?(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-4 md:p-6 grid gap-4 md:gap-6 md:grid-cols-[320px_1fr]",children:[(0,b.jsxs)("aside",{className:"rounded-2xl border h-[82vh] overflow-auto p-3 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,b.jsxs)("span",{className:"font-medium",children:[t,"/",s," â€¢ ",u,"%"]})]}),(0,b.jsx)("div",{className:"mt-2 h-2 w-full rounded bg-gray-200",children:(0,b.jsx)("div",{className:"h-2 rounded bg-black transition-all",style:{width:`${u}%`}})})]}),(0,b.jsx)("input",{className:"w-full rounded-xl border px-3 py-2 outline-none focus:ring-2 focus:ring-black/70",placeholder:"Search lessonâ€¦",value:q,onChange:a=>r(a.target.value)}),(0,b.jsx)("div",{className:"space-y-3",children:g.map(a=>{let c=(v.get(a._id)??[]).filter(a=>a.title.toLowerCase().includes(q.toLowerCase()))||[];return(0,b.jsxs)("div",{className:"rounded-xl border",children:[(0,b.jsxs)("div",{className:"px-3 py-2 font-semibold bg-gray-50 rounded-t-xl",children:["Module ",a.moduleNo,": ",a.title]}),(0,b.jsxs)("ul",{className:"p-2 space-y-1",children:[c.map(a=>{let c=m._id===a._id,d=!(a=>{if(1===a.order)return!0;let b=i.find(b=>b.order===a.order-1);return!b||k.includes(b._id)})(a),e=k.includes(a._id);return(0,b.jsx)("li",{children:(0,b.jsxs)("button",{onClick:()=>!d&&n(a),className:`w-full text-left px-2 py-1.5 rounded flex items-center gap-2 ${c?"bg-black text-white":d?"text-gray-400 cursor-not-allowed":"hover:bg-gray-100"}`,children:[(0,b.jsx)("span",{className:"text-lg leading-none",children:e?"âœ…":d?"ðŸ”’":"â­•"}),(0,b.jsx)("span",{className:"flex-1 truncate",children:a.title}),(0,b.jsxs)("span",{className:"text-xs opacity-70",children:["#",a.order]})]})},a._id)}),!c.length&&(0,b.jsx)("li",{className:"px-2 py-1 text-sm text-gray-500",children:"No matching lessons"})]})]},a._id)})})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-2xl overflow-hidden bg-black aspect-video",children:(0,b.jsx)("iframe",{className:"w-full h-full",src:(a=m.videoUrl,a?.includes("watch?v=")?a.replace("watch?v=","embed/"):a),title:m.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"font-semibold",children:m.title}),(0,b.jsxs)("div",{className:"space-x-2",children:[(0,b.jsx)("button",{onClick:function(){if(!m)return;let a=i.findIndex(a=>a._id===m._id),b=i[a-1];b&&n(b)},className:"px-3 py-2 rounded border",children:"Previous"}),(0,b.jsx)("button",{onClick:w,className:"px-3 py-2 rounded bg-black text-white",children:"Next"})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border p-4",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Notes (PDF)"}),m.pdfs?.length?(0,b.jsx)("ul",{className:"list-disc ml-5 space-y-1",children:m.pdfs.map(a=>(0,b.jsx)("li",{children:(0,b.jsx)("a",{className:"underline",href:a.url,target:"_blank",rel:"noreferrer",children:a.name})},a.url))}):(0,b.jsx)("div",{className:"text-gray-500",children:"No notes for this lecture."})]})]})]}):(0,b.jsx)("div",{className:"p-6",children:"No lectures available yet."})}}];

//# sourceMappingURL=OneDrive_Desktop_Parrale%20task_lms%20client_src_aa076550._.js.map