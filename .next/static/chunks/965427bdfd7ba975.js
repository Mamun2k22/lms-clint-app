(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16698,e=>{"use strict";e.s(["api",()=>t,"serverApi",()=>r]);let s="http://localhost:4000";async function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=localStorage.getItem("token"),a=new Headers(t.headers);a.has("Content-Type")||a.set("Content-Type","application/json"),r&&a.set("Authorization","Bearer ".concat(r));let n=await fetch("".concat(s).concat(e),{...t,headers:a,cache:"no-store"});if(!n.ok)throw await n.json().catch(()=>({message:n.statusText}));return await n.json()}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await fetch("".concat(s).concat(e),{...t,cache:"no-store"});if(!r.ok)throw await r.json().catch(()=>({message:r.statusText}));return await r.json()}},24419,e=>{"use strict";e.s(["default",()=>n]);var s=e.i(22834),t=e.i(74340),r=e.i(94449),a=e.i(16698);function n(){let{id:e}=(0,r.useParams)(),[n,l]=(0,t.useState)(null),[i,d]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),[u,x]=(0,t.useState)(!0),[m,h]=(0,t.useState)(""),[g,p]=(0,t.useState)(""),[b,y]=(0,t.useState)(""),[f,j]=(0,t.useState)(""),[N,v]=(0,t.useState)(""),[w,S]=(0,t.useState)(""),[C,_]=(0,t.useState)("");async function k(){var s;x(!0);let[t,r,n]=await Promise.all([(0,a.serverApi)("/courses"),(0,a.serverApi)("/modules?course=".concat(e)),(0,a.serverApi)("/lectures?course=".concat(e))]);l(null!=(s=t.find(s=>s._id===e))?s:null),d(r),c(n),r[0]&&j(r[0]._id),x(!1)}(0,t.useEffect)(()=>{k()},[e]);let T=(0,t.useMemo)(()=>{let e=new Map;return i.forEach(s=>e.set(s._id,[])),o.forEach(s=>{var t;return null==(t=e.get(s.moduleId))?void 0:t.push(s)}),e},[i,o]);async function A(s){s.preventDefault(),await (0,a.api)("/modules",{method:"POST",body:JSON.stringify({courseId:e,title:m})}),h(""),await k()}async function D(e){await (0,a.api)("/modules/".concat(e),{method:"DELETE"}),await k()}async function E(e){e.preventDefault();let s=N&&w?[{name:N,url:w}]:[];await (0,a.api)("/lectures",{method:"POST",body:JSON.stringify({moduleId:f,title:g,videoUrl:b,pdfs:s})}),p(""),y(""),v(""),S(""),await k()}async function L(e){await (0,a.api)("/lectures/".concat(e),{method:"DELETE"}),await k()}return u?(0,s.jsxs)("div",{className:"mx-auto max-w-6xl p-6 space-y-6",children:[(0,s.jsx)("div",{className:"h-8 w-2/3 rounded bg-gray-200 animate-pulse"}),(0,s.jsx)("div",{className:"h-40 rounded-2xl border bg-white/70 ring-1 ring-gray-100 animate-pulse"}),(0,s.jsx)("div",{className:"h-80 rounded-2xl border bg-white/70 ring-1 ring-gray-100 animate-pulse"})]}):(0,s.jsxs)("div",{className:"mx-auto max-w-6xl p-6 space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center gap-2 text-xs text-gray-500",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5",children:[(0,s.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"Admin"]}),(0,s.jsx)("span",{children:"â€º"}),(0,s.jsx)("span",{children:"Courses"}),(0,s.jsx)("span",{children:"â€º"}),(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Manage"})]}),(0,s.jsxs)("h1",{className:"text-2xl font-bold tracking-tight",children:["Manage: ",(0,s.jsx)("span",{className:"font-extrabold",children:null==n?void 0:n.title})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Add modules and lectures. Changes are applied instantly."})]}),(0,s.jsxs)("a",{href:"/learn/".concat(e),target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition hover:bg-black active:scale-[0.98]",children:[(0,s.jsx)("span",{className:"-ml-1",children:"â–¶"})," Open Learn View"]})]}),(0,s.jsxs)("section",{className:"rounded-2xl border bg-white/80 backdrop-blur shadow-sm ring-1 ring-gray-100",children:[(0,s.jsx)("div",{className:"flex items-center justify-between border-b px-5 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-black text-white",children:"ðŸ“¦"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-base font-semibold",children:"Modules"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Organize your course into sections."})]})]})}),(0,s.jsxs)("div",{className:"px-5 py-5 space-y-5",children:[(0,s.jsxs)("form",{onSubmit:A,className:"flex flex-col gap-2 sm:flex-row",children:[(0,s.jsx)("input",{className:"h-11 w-full rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"Module title",value:m,onChange:e=>h(e.target.value)}),(0,s.jsx)("button",{className:"inline-flex items-center justify-center rounded-xl bg-gray-900 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition hover:bg-black active:scale-[0.98]",type:"submit",children:"Add"})]}),0===i.length?(0,s.jsx)("div",{className:"rounded-xl border border-dashed bg-white/70 p-8 text-center text-sm text-gray-600 ring-1 ring-gray-100",children:"No modules yet. Create your first module above."}):(0,s.jsx)("ul",{className:"grid gap-3",children:i.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between rounded-2xl border bg-white p-4 shadow-sm ring-1 ring-gray-100",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"truncate text-sm font-semibold",children:["Module ",e.moduleNo,": ",e.title]}),(0,s.jsx)("div",{className:"mt-0.5 text-[11px] text-gray-500",children:e._id})]}),(0,s.jsx)("button",{onClick:()=>D(e._id),className:"inline-flex items-center justify-center rounded-lg border bg-white px-3 py-1.5 text-sm text-red-600 shadow-sm ring-1 ring-gray-200 transition hover:bg-red-50 hover:border-red-200",children:"Delete"})]},e._id))})]})]}),(0,s.jsxs)("section",{className:"rounded-2xl border bg-white/80 backdrop-blur shadow-sm ring-1 ring-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b px-5 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-black text-white",children:"ðŸŽ¬"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-base font-semibold",children:"Lectures"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Add videos and documents under each module."})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{placeholder:"Search lecture by titleâ€¦",className:"h-10 w-72 rounded-xl border border-gray-200 bg-white pl-9 pr-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition max-sm:w-56",value:C,onChange:e=>_(e.target.value)}),(0,s.jsx)("span",{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"ðŸ”Ž"})]})]}),(0,s.jsx)("div",{className:"px-5 py-5",children:(0,s.jsxs)("form",{onSubmit:E,className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsx)("select",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",value:f,onChange:e=>j(e.target.value),children:i.map(e=>(0,s.jsxs)("option",{value:e._id,children:["Module ",e.moduleNo," â€” ",e.title]},e._id))}),(0,s.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"Lecture title",value:g,onChange:e=>p(e.target.value)}),(0,s.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"YouTube URL",value:b,onChange:e=>y(e.target.value)}),(0,s.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"PDF name (optional)",value:N,onChange:e=>v(e.target.value)}),(0,s.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"PDF url (optional)",value:w,onChange:e=>S(e.target.value)}),(0,s.jsx)("button",{className:"inline-flex items-center justify-center rounded-xl bg-gray-900 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition hover:bg-black active:scale-[0.98]",type:"submit",children:"Add Lecture"})]})}),(0,s.jsx)("div",{className:"px-5 pb-6 space-y-5",children:i.map(e=>{var t,r,a,n;return(0,s.jsxs)("div",{className:"rounded-2xl border bg-white p-4 shadow-sm ring-1 ring-gray-100",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold",children:["Module ",e.moduleNo,": ",e.title]}),(0,s.jsxs)("span",{className:"rounded-full border bg-white px-2.5 py-1 text-xs text-gray-700 shadow-sm",children:[null!=(a=null==(t=T.get(e._id))?void 0:t.length)?a:0," lecture(s)"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,s.jsx)("th",{className:"py-2 pr-3",children:"Order"}),(0,s.jsx)("th",{className:"py-2 pr-3",children:"Title"}),(0,s.jsx)("th",{className:"py-2 pr-3",children:"Video"}),(0,s.jsx)("th",{className:"py-2 pr-3",children:"PDFs"}),(0,s.jsx)("th",{className:"py-2 pr-3"})]})}),(0,s.jsxs)("tbody",{children:[(null!=(n=T.get(e._id))?n:[]).filter(e=>e.title.toLowerCase().includes(C.toLowerCase())).map((e,t)=>{var r;return(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50/60",children:[(0,s.jsx)("td",{className:"py-2 pr-3",children:e.order}),(0,s.jsx)("td",{className:"py-2 pr-3",children:e.title}),(0,s.jsx)("td",{className:"py-2 pr-3 max-w-[320px] truncate",children:e.videoUrl}),(0,s.jsx)("td",{className:"py-2 pr-3",children:(null==(r=e.pdfs)?void 0:r.length)?e.pdfs.map(e=>(0,s.jsxs)("a",{href:e.url,target:"_blank",className:"mr-2 inline-flex items-center gap-1 rounded-full border bg-white px-2.5 py-1 text-xs underline decoration-gray-300 shadow-sm ring-1 ring-gray-200 hover:bg-gray-50",children:["ðŸ“„ ",e.name]},e.url)):(0,s.jsx)("span",{className:"text-gray-400",children:"â€”"})}),(0,s.jsx)("td",{className:"py-2 pr-0 text-right",children:(0,s.jsx)("button",{onClick:()=>L(e._id),className:"inline-flex items-center justify-center rounded-lg border bg-white px-2.5 py-1.5 text-xs text-red-600 shadow-sm ring-1 ring-gray-200 transition hover:bg-red-50 hover:border-red-200",children:"Delete"})})]},e._id)}),!(null==(r=T.get(e._id))?void 0:r.length)&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"py-3 text-gray-500",colSpan:5,children:"No lectures"})})]})]})})]},e._id)})})]})]})}}]);