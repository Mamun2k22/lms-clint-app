(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},2134:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(5155),a=t(2115),n=t(63),l=t(6890);function i(){let{id:e}=(0,n.useParams)(),[s,t]=(0,a.useState)(null),[i,d]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[v,C]=(0,a.useState)(""),[_,k]=(0,a.useState)("");async function D(){var s;x(!0);let[r,a,n]=await Promise.all([(0,l.Q)("/courses"),(0,l.Q)("/modules?course=".concat(e)),(0,l.Q)("/lectures?course=".concat(e))]);t(null!=(s=r.find(s=>s._id===e))?s:null),d(a),c(n),a[0]&&j(a[0]._id),x(!1)}(0,a.useEffect)(()=>{D()},[e]);let S=(0,a.useMemo)(()=>{let e=new Map;return i.forEach(s=>e.set(s._id,[])),o.forEach(s=>{var t;return null==(t=e.get(s.moduleId))?void 0:t.push(s)}),e},[i,o]);async function E(s){s.preventDefault(),await (0,l.F)("/modules",{method:"POST",body:JSON.stringify({courseId:e,title:m})}),h(""),await D()}async function P(e){await (0,l.F)("/modules/".concat(e),{method:"DELETE"}),await D()}async function T(e){e.preventDefault();let s=N&&v?[{name:N,url:v}]:[];await (0,l.F)("/lectures",{method:"POST",body:JSON.stringify({moduleId:f,title:g,videoUrl:b,pdfs:s})}),p(""),y(""),w(""),C(""),await D()}async function F(e){await (0,l.F)("/lectures/".concat(e),{method:"DELETE"}),await D()}return u?(0,r.jsxs)("div",{className:"mx-auto max-w-6xl p-6 space-y-6",children:[(0,r.jsx)("div",{className:"h-8 w-2/3 rounded bg-gray-200 animate-pulse"}),(0,r.jsx)("div",{className:"h-40 rounded-2xl border bg-white/70 ring-1 ring-gray-100 animate-pulse"}),(0,r.jsx)("div",{className:"h-80 rounded-2xl border bg-white/70 ring-1 ring-gray-100 animate-pulse"})]}):(0,r.jsxs)("div",{className:"mx-auto max-w-6xl p-6 space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center gap-2 text-xs text-gray-500",children:[(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5",children:[(0,r.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"Admin"]}),(0,r.jsx)("span",{children:"›"}),(0,r.jsx)("span",{children:"Courses"}),(0,r.jsx)("span",{children:"›"}),(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Manage"})]}),(0,r.jsxs)("h1",{className:"text-2xl font-bold tracking-tight",children:["Manage: ",(0,r.jsx)("span",{className:"font-extrabold",children:null==s?void 0:s.title})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Add modules and lectures. Changes are applied instantly."})]}),(0,r.jsxs)("a",{href:"/learn/".concat(e),target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition hover:bg-black active:scale-[0.98]",children:[(0,r.jsx)("span",{className:"-ml-1",children:"▶"})," Open Learn View"]})]}),(0,r.jsxs)("section",{className:"rounded-2xl border bg-white/80 backdrop-blur shadow-sm ring-1 ring-gray-100",children:[(0,r.jsx)("div",{className:"flex items-center justify-between border-b px-5 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-black text-white",children:"\uD83D\uDCE6"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-base font-semibold",children:"Modules"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Organize your course into sections."})]})]})}),(0,r.jsxs)("div",{className:"px-5 py-5 space-y-5",children:[(0,r.jsxs)("form",{onSubmit:E,className:"flex flex-col gap-2 sm:flex-row",children:[(0,r.jsx)("input",{className:"h-11 w-full rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"Module title",value:m,onChange:e=>h(e.target.value)}),(0,r.jsx)("button",{className:"inline-flex items-center justify-center rounded-xl bg-gray-900 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition hover:bg-black active:scale-[0.98]",type:"submit",children:"Add"})]}),0===i.length?(0,r.jsx)("div",{className:"rounded-xl border border-dashed bg-white/70 p-8 text-center text-sm text-gray-600 ring-1 ring-gray-100",children:"No modules yet. Create your first module above."}):(0,r.jsx)("ul",{className:"grid gap-3",children:i.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between rounded-2xl border bg-white p-4 shadow-sm ring-1 ring-gray-100",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsxs)("div",{className:"truncate text-sm font-semibold",children:["Module ",e.moduleNo,": ",e.title]}),(0,r.jsx)("div",{className:"mt-0.5 text-[11px] text-gray-500",children:e._id})]}),(0,r.jsx)("button",{onClick:()=>P(e._id),className:"inline-flex items-center justify-center rounded-lg border bg-white px-3 py-1.5 text-sm text-red-600 shadow-sm ring-1 ring-gray-200 transition hover:bg-red-50 hover:border-red-200",children:"Delete"})]},e._id))})]})]}),(0,r.jsxs)("section",{className:"rounded-2xl border bg-white/80 backdrop-blur shadow-sm ring-1 ring-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b px-5 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-black text-white",children:"\uD83C\uDFAC"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-base font-semibold",children:"Lectures"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Add videos and documents under each module."})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{placeholder:"Search lecture by title…",className:"h-10 w-72 rounded-xl border border-gray-200 bg-white pl-9 pr-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition max-sm:w-56",value:_,onChange:e=>k(e.target.value)}),(0,r.jsx)("span",{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"\uD83D\uDD0E"})]})]}),(0,r.jsx)("div",{className:"px-5 py-5",children:(0,r.jsxs)("form",{onSubmit:T,className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsx)("select",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",value:f,onChange:e=>j(e.target.value),children:i.map(e=>(0,r.jsxs)("option",{value:e._id,children:["Module ",e.moduleNo," — ",e.title]},e._id))}),(0,r.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"Lecture title",value:g,onChange:e=>p(e.target.value)}),(0,r.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"YouTube URL",value:b,onChange:e=>y(e.target.value)}),(0,r.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"PDF name (optional)",value:N,onChange:e=>w(e.target.value)}),(0,r.jsx)("input",{className:"h-11 rounded-xl border border-gray-200 bg-white px-3 text-sm outline-none focus:border-gray-300 focus:ring-2 focus:ring-gray-900/10 transition",placeholder:"PDF url (optional)",value:v,onChange:e=>C(e.target.value)}),(0,r.jsx)("button",{className:"inline-flex items-center justify-center rounded-xl bg-gray-900 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition hover:bg-black active:scale-[0.98]",type:"submit",children:"Add Lecture"})]})}),(0,r.jsx)("div",{className:"px-5 pb-6 space-y-5",children:i.map(e=>{var s,t,a,n;return(0,r.jsxs)("div",{className:"rounded-2xl border bg-white p-4 shadow-sm ring-1 ring-gray-100",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold",children:["Module ",e.moduleNo,": ",e.title]}),(0,r.jsxs)("span",{className:"rounded-full border bg-white px-2.5 py-1 text-xs text-gray-700 shadow-sm",children:[null!=(a=null==(s=S.get(e._id))?void 0:s.length)?a:0," lecture(s)"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Order"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Title"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Video"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"PDFs"}),(0,r.jsx)("th",{className:"py-2 pr-3"})]})}),(0,r.jsxs)("tbody",{children:[(null!=(n=S.get(e._id))?n:[]).filter(e=>e.title.toLowerCase().includes(_.toLowerCase())).map((e,s)=>{var t;return(0,r.jsxs)("tr",{className:s%2==0?"bg-white":"bg-gray-50/60",children:[(0,r.jsx)("td",{className:"py-2 pr-3",children:e.order}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.title}),(0,r.jsx)("td",{className:"py-2 pr-3 max-w-[320px] truncate",children:e.videoUrl}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(null==(t=e.pdfs)?void 0:t.length)?e.pdfs.map(e=>(0,r.jsxs)("a",{href:e.url,target:"_blank",className:"mr-2 inline-flex items-center gap-1 rounded-full border bg-white px-2.5 py-1 text-xs underline decoration-gray-300 shadow-sm ring-1 ring-gray-200 hover:bg-gray-50",children:["\uD83D\uDCC4 ",e.name]},e.url)):(0,r.jsx)("span",{className:"text-gray-400",children:"—"})}),(0,r.jsx)("td",{className:"py-2 pr-0 text-right",children:(0,r.jsx)("button",{onClick:()=>F(e._id),className:"inline-flex items-center justify-center rounded-lg border bg-white px-2.5 py-1.5 text-xs text-red-600 shadow-sm ring-1 ring-gray-200 transition hover:bg-red-50 hover:border-red-200",children:"Delete"})})]},e._id)}),!(null==(t=S.get(e._id))?void 0:t.length)&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"py-3 text-gray-500",colSpan:5,children:"No lectures"})})]})]})})]},e._id)})})]})]})}},6890:(e,s,t)=>{"use strict";t.d(s,{F:()=>a,Q:()=>n});let r="https://lms-system-backend-dusky.vercel.app";async function a(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=localStorage.getItem("token"),a=new Headers(s.headers);a.has("Content-Type")||a.set("Content-Type","application/json"),t&&a.set("Authorization","Bearer ".concat(t));let n=await fetch("".concat(r).concat(e),{...s,headers:a,cache:"no-store"});if(!n.ok)throw await n.json().catch(()=>({message:n.statusText}));return await n.json()}async function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=await fetch("".concat(r).concat(e),{...s,cache:"no-store"});if(!t.ok)throw await t.json().catch(()=>({message:t.statusText}));return await t.json()}},7155:(e,s,t)=>{Promise.resolve().then(t.bind(t,2134))}},e=>{e.O(0,[441,255,358],()=>e(e.s=7155)),_N_E=e.O()}]);